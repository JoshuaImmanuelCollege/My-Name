- pipeline: prod__build__test__deploy
  name: "[PROD] Build, Test, Deploy"
  refs:
  - refs/heads/main
  events:
  - type: PUSH
  fail_on_prepare_env_warning: true
  resources: MEDIUM
  actions:
  - action: 'npm run build '
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - npm install
    - 'npm run build '
    shell: BASH
  - action: npm run test
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - npm run test
    shell: BASH
