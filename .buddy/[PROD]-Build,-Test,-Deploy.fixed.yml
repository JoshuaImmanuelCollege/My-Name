- pipeline: prod__build__test__deploy
  name: "[PROD] Build, Test, Deploy"
  refs:
  - refs/heads/main
  events:
  - type: PUSH
  fail_on_prepare_env_warning: true
  resources: MEDIUM
  targets:
  - target: my_sftp_deploy_target
    type: SSH
    name: My SFTP Deploy Target
    host: 120.60.9.38
    port: $22
    path: /buid
    auth:
      method: SSH_KEY
      username: ubuntu
      key: '!encrypted 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.0EmeS9NLV9FgjPM8iK/2xg=='
  - target: my_sftp_one
    type: SSH
    name: 'My_SFTP_One '
    host: 185.206.228.0/24
    path: /home/joshua/my-app
    auth:
      username: joshu
      password: '!encrypted V4O/bE19NvDOQcE4Z/D+2w==./ssOyMNr4k2fAbIx0Bcvxw=='
  actions:
  - action: 'npm run build '
    type: BUILD
    disabled: true
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - npm install
    - 'npm run build '
    shell: BASH
  - action: npm run test
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - npm run test
    shell: BASH
  - action: Git Push
    type: PUSH
    target_branch: $BUDDY_RUN_BRANCH
    comment: $BUDDY_RUN_ID
    targets:
    - project_repository
